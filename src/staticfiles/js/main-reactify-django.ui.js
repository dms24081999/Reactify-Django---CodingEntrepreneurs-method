(this["webpackJsonpreactify-ui"]=this["webpackJsonpreactify-ui"]||[]).push([[0],{51:function(e,t,s){e.exports=s(80)},56:function(e,t,s){},58:function(e,t,s){},59:function(e,t,s){e.exports=s.p+"static/media/logo.25bf045c.svg"},80:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(6),o=s.n(i),r=(s(56),s(23)),c=s.n(r),l=s(29),u=s(13),d=s(25),h=s(17),p=s(42),m=s(43),f=s(46),g=s(109),b=s(110),v=(s(58),s(59),s(14)),k=s.n(v),y=s(30),w=s.n(y),_=function(e){function t(e){var s;return Object(d.a)(this,t),(s=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target;s.setState(Object(u.a)({},t.name,t.value)),console.log(s.state.username,s.state.password)},s.handleClick=function(e){e.preventDefault(),console.log(s.state.username,s.state.password),s.initLogin()},s.state={isAuthenticated:!1,username:"",password:"",session_id:""},s}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.get(),console.log(t.session_id),e.next=4,console.log(this.state.isAuthenticated,this.state.session_id);case 4:if(void 0===t.session_id){e.next=13;break}return k.a.set("session_id",t.session_id),k.a.set("sessionid",t.session_id),e.next=9,w.a.get("http://dms.com:8000/api/user/current/",{headers:{Accept:"application/json","Content-Type":"application/json"}},{credentials:"include",withCredentials:!0}).then((function(e){console.log("Response data: ",e.data),k.a.set("session_id",t.session_id,{expires:7}),k.a.set("sessionid",t.session_id,{expires:7}),s.auth=!0,s.sessionkey=t.session_id})).catch((function(e){e=JSON.stringify(e),console.log(e),s.auth=!1,s.sessionkey=""}));case 9:return e.next=11,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 11:e.next=15;break;case 13:return e.next=15,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 15:return this.state.isAuthenticated||this.initLogin(),e.next=18,console.log(this.state.isAuthenticated,this.state.session_id);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initLogin",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("http://dms.com:8000/rest-auth/login/",{username:this.state.username,password:this.state.password},{headers:{"Content-Type":"application/json"}},{withCredentials:!0}).then((function(e){console.log(e),k.a.set("session_id",e.data.session_key,{expires:7}),k.a.set("sessionid",e.data.session_key,{expires:7}),t.auth=!0,t.sessionkey=e.data.session_key;var s=k.a.get();console.log("Cookies after login: ",s)})).catch((function(e){console.log(e.response.data),t.auth=!1,t.sessionkey=""}));case 2:return e.next=4,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{style:{textAlign:"center",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},a.a.createElement("form",{method:"POST",noValidate:!0,autoComplete:"off"},a.a.createElement(g.a,{id:"standard-basic",value:this.state.username,name:"username",onChange:this.handleChange,label:"Standard"}),a.a.createElement("br",null),a.a.createElement(g.a,{id:"standard-basic",value:this.state.password,name:"password",onChange:this.handleChange,label:"Standard"}),a.a.createElement("br",null),a.a.createElement(g.a,{id:"filled-basic",label:"Filled",variant:"filled"}),a.a.createElement("br",null),a.a.createElement(g.a,{id:"outlined-basic",label:"Outlined",variant:"outlined",required:!0}),a.a.createElement("br",null),a.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit",onClick:this.handleClick},"Hello World")))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.36dbdae8.chunk.js.map