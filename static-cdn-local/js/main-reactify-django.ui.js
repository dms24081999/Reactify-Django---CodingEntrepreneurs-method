(this["webpackJsonpreactify-ui"]=this["webpackJsonpreactify-ui"]||[]).push([[0],{64:function(e,t,a){e.exports=a(93)},69:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},93:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(7),o=a.n(i),r=(a(69),a(15)),c=a.n(r),l=a(29),u=a(16),d=a(31),h=a(17),p=a(36),m=a(37),f=a(42),b=(a(71),a(72),a(13)),g=a.n(b),v=a(38),y=a.n(v),k=a(124),w=a(131),x=a(128),O=a(94),C=a(129),_=a(132),j=a(130),E=a(4),S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleOpenLoginModal=function(){a.setState({setOpenModal:!0})},a.handleCloseLoginModal=function(){a.setState({setOpenModal:!1})},a.handleChangeText=function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,e.next=3,a.setState(Object(u.a)({},n.name,n.value));case 3:console.log(a.state.username,a.state.password);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeRememberMe=function(){a.setState({rememberme:!a.state.rememberme}),console.log(a.state.rememberme)},a.handleClickSubmit=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,console.log(a.state.username,a.state.password);case 3:return e.next=5,a.props.handleRec(a.state.username,a.state.password,a.state.rememberme);case 5:!0===a.props.isAuthenticated&&a.setState({setOpenModal:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={setOpenModal:!1,username:"",password:"",rememberme:!1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",null,s.a.createElement(k.a,{variant:"contained",color:"primary",type:"button",onClick:this.handleOpenLoginModal},"Login"),s.a.createElement(w.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:this.state.setOpenModal,onClose:this.handleCloseLoginModal,closeAfterTransition:!0,BackdropComponent:x.a,BackdropProps:{timeout:500}},s.a.createElement(O.a,{in:this.state.setOpenModal},s.a.createElement("div",{className:e.paper},s.a.createElement("form",{method:"POST",noValidate:!0,autoComplete:"off"},s.a.createElement(C.a,{id:"standard-basic",value:this.state.username,name:"username",onChange:this.handleChangeText,label:"Standard"}),s.a.createElement("br",null),s.a.createElement(C.a,{id:"standard-basic",value:this.state.password,name:"password",onChange:this.handleChangeText,label:"Standard"}),s.a.createElement("br",null),s.a.createElement(C.a,{id:"filled-basic",label:"Filled",variant:"filled"}),s.a.createElement("br",null),s.a.createElement(C.a,{id:"outlined-basic",label:"Outlined",variant:"outlined",required:!0}),s.a.createElement("br",null),s.a.createElement(_.a,{control:s.a.createElement(j.a,{checked:this.state.rememberme,onChange:this.handleChangeRememberMe,name:"rememberme",color:"primary"}),label:"Primary"}),s.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",onClick:this.handleClickSubmit},"Hello World"))))))}}]),t}(s.a.Component),M=Object(E.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(S),A=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target;a.setState(Object(u.a)({},t.name,t.value)),console.log(a.state.username,a.state.password)},a.handleClick=function(e){e.preventDefault(),console.log(a.state.username,a.state.password),a.initLogin()},a.handleRec=function(){var e=Object(l.a)(c.a.mark((function e(t,n,s){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Main",t,n,s),e.next=3,a.initLogin(t,n,s);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1,username:"",password:"",session_id:"",rememberme:!1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.a.get(),console.log(t.session_id),e.next=4,console.log(this.state.isAuthenticated,this.state.session_id);case 4:if(void 0===t.session_id){e.next=13;break}return g.a.set("session_id",t.session_id),g.a.set("sessionid",t.session_id),e.next=9,y.a.get("http://dms.com:8000/api/user/current/",{headers:{Accept:"application/json","Content-Type":"application/json"}},{withCredentials:!0}).then((function(e){console.log("Response data: ",e.data),g.a.set("session_id",t.session_id,{expires:60}),g.a.set("sessionid",t.session_id,{expires:60}),a.auth=!0,a.sessionkey=t.session_id})).catch((function(e){e=JSON.stringify(e),console.log(e),a.auth=!1,a.sessionkey=""}));case 9:return e.next=11,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 11:e.next=15;break;case 13:return e.next=15,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 15:return e.next=17,console.log(this.state.isAuthenticated,this.state.session_id);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initLogin",value:function(){var e=Object(l.a)(c.a.mark((function e(t,a,n){var s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.get(),e.next=3,y.a.post("http://dms.com:8000/rest-auth/login/",{username:t,password:a},{headers:{"Content-Type":"application/json"}},{withCredentials:!0}).then((function(e){console.log(e),n?(g.a.set("session_id",e.data.session_key,{expires:60}),g.a.set("sessionid",e.data.session_key,{expires:60})):(g.a.set("session_id",e.data.session_key),g.a.set("sessionid",e.data.session_key)),s.auth=!0,s.sessionkey=e.data.session_key;var t=g.a.get();console.log("Cookies after login: ",t)})).catch((function(e){console.log(e),s.auth=!1,s.sessionkey=""}));case 3:return e.next=5,this.setState({isAuthenticated:this.auth,session_id:this.sessionkey});case 5:return e.next=7,console.log(this.state.isAuthenticated,this.state.session_id);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{style:{textAlign:"center",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},s.a.createElement(M,{handleRec:this.handleRec,isAuthenticated:this.state.isAuthenticated}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.fc0b3ea0.chunk.js.map